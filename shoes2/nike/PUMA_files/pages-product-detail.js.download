"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9875],{55983:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(27188),o=r(54513),a=r(53828),i=r(19836),d=r.n(i),l=r(4766);const c=["rules","children"],s=e=>{var t;let{rules:r=[],children:i}=e,d=(0,o.A)(e,c);const s=(null==r||null===(t=r.find((e=>e.title)))||void 0===t?void 0:t.content)||(null==d?void 0:d.title);return a.createElement(l.A,(0,n.A)({},d,{title:s}),r.filter((e=>!e.ID.startsWith("ff_"))).map((e=>e.name?a.createElement("meta",{key:e.ID,name:e.ID,content:e.content}):e.property?a.createElement("meta",{key:e.ID,property:e.ID,content:e.content}):void 0)),i)};s.propTypes={rules:d().array,children:d().node,title:d().string};const u=s},97165:(e,t,r)=>{r.d(t,{N:()=>p});var n=r(55912),o=r(53828),a=r(30643),i=r(37716),d=r(6537),l=r(19836),c=r.n(l);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const p=(e,t)=>{const r=r=>{var n,l,c,s;const{site:p}=(0,d.A)(),[m,v]=(0,o.useState)(t&&(null===(n=p.pageDesigner)||void 0===n||null===(l=n.pages)||void 0===l||null===(c=l[t])||void 0===c?void 0:c.id)),{data:y,isLoading:g}=(0,i.A)(m,u({enabled:!!m&&!r.page,initialData:r.page},null==p||null===(s=p.queryHooksConfig)||void 0===s?void 0:s.pageDesigner)),_=e(u(u({},r),{},{setPageId:e=>m!==e&&v(e),page:y,isPageLoading:g&&!!m}));return _&&o.createElement(a.A,{page:y},_)};return r.displayName=`withPageDesigner(${e.displayName||e.name})`,r.propTypes={page:c().object},r}},2765:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ne});var n=r(60663),o=r(53828),a=r(27188),i=r(55912),d=r(19836),l=r.n(d),c=r(83322),s=r(15762),u=r(34441),p=r(36287),m=r(86400),v=r(34116),y=r(13635),g=r(28777),_=r(41367),E=r(4973),f=r(6537),h=r(42739),P=r(11359),b=r(6475),O=r(55983),I=r(40826),A=r(1844),w=r(36068);const T=({product:e})=>{const t=(0,A.zn)();return o.createElement(o.Fragment,null,(null==t?void 0:t.pdpRecommenders)&&o.createElement(m.B,{spacing:16},null==t?void 0:t.pdpRecommenders.map((t=>{const[r,n]=t.split("|");return o.createElement(w.A,{title:n,key:r,recommender:r,products:[e],shouldFetch:()=>null==e?void 0:e.id,renderElementTitle:"h2"})}))))};T.propTypes={product:l().object};const C=T;var k=r(34642),D=r(35145),S=r(6675),j=r(38993),B=r(17847),N=r(16402),L=r.n(N),V=r(64194),M=r(60981),R=r(38340),q=r(33433),H=r(73352);const z=({product:e})=>{var t,r;const n=(0,H.o5)("ProductView",{});return o.createElement(p.az,(0,a.A)({},n.descriptionBlock,{id:"product-description-block"}),o.createElement(p.az,{dangerouslySetInnerHTML:{__html:L().sanitize(null==e?void 0:e.longDescription)}}),o.createElement(V.z,{alignItems:"start",mt:"3rem"},(null==e?void 0:e.c_materialComposition)&&o.createElement(p.az,{w:"full"},o.createElement(R.D,{as:"h3"},o.createElement(q.A,{id:"product_detail.description.material_composition",defaultMessage:[{type:0,value:"Material composition"}]})," "),o.createElement(M.B8,null,null==e||null===(t=e.c_materialComposition)||void 0===t?void 0:t.map((e=>o.createElement(M.ck,{key:e},e))))),(null==e?void 0:e.c_careInstructions)&&o.createElement(p.az,{w:"full"},o.createElement(R.D,{as:"h3"},o.createElement(q.A,{id:"product_detail.description.care_instructions",defaultMessage:[{type:0,value:"Care instructions"}]})," "),o.createElement(M.B8,null,null==e||null===(r=e.c_careInstructions)||void 0===r?void 0:r.map((e=>o.createElement(M.ck,{key:e},e)))))))};z.propTypes={product:l().object};const F=z;var $=r(90097),G=r(22178),U=r(97165),x=r(18376),Q=r(16995);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Z=({page:e,setPageId:t})=>{var r,i,d,l,A,w,T,N;const{formatMessage:L}=(0,s.A)(),V=(0,h.useLocation)(),M=(0,y.A)(),R=(0,g.A)(),{site:q,buildUrl:z}=(0,f.A)(),{isLoading:U}=(0,v.X)(),{addItemToNewOrExistingBasket:W}=(0,u.useShopperBasketsMutationHelper)(),Z=(0,u.useShopperBasketsMutation)("updateItemsInBasket"),{req:K,res:X}=(0,_.useServerContext)();X&&X.set("Cache-Control",`s-maxage=${j.dN}, stale-while-revalidate=${j.Yw}`);let J=(0,h.useParams)();const ee=new URLSearchParams(V.search);J.productId=null===(r=J.productId)||void 0===r?void 0:r.replace("-","_"),null!==(i=J.productId)&&void 0!==i&&i.match(/^[0-9]{6}$/)&&2===(null===(d=ee.get("color"))||void 0===d?void 0:d.length)&&(J.productId=`${J.productId}_${ee.get("color")}`);const{app:te}=(0,x.getConfig)(),{data:re,isLoading:ne,isError:oe,error:ae}=(0,u.useProduct)({parameters:Y({id:J.productId},null==q||null===(l=q.productDetailPage)||void 0===l?void 0:l.detailParams),headers:{c_proxy_host:(0,k.$P)()+te.commerceAPI.proxyPath}},Y({keepPreviousData:!0},null==q||null===(A=q.queryHooksConfig)||void 0===A?void 0:A.productDetail)),[ie]=(null==e?void 0:e.regions)||[];t(null==re?void 0:re.c_pdpPageDesignerID);const{data:de,isError:le,error:ce}=(0,u.useCategory)({parameters:{id:null==re?void 0:re.primaryCategoryId,levels:1}},Y({initialData:null==re?void 0:re.c_primaryCategory},null==q||null===(w=q.queryHooksConfig)||void 0===w?void 0:w.productDetailCategory)),[se,ue]=(0,o.useState)({}),[pe,me]=(0,o.useState)({}),[ve,ye]=(0,o.useState)(1),ge=o.useRef({}),_e=null==re?void 0:re.type.set,Ee=null==re?void 0:re.type.bundle;let fe="";Ee&&(fe=null===(T=Object.keys(se))||void 0===T?void 0:T.map((e=>se[e].variant.productId)).join(","));const{data:he}=(0,u.useProducts)({parameters:{ids:fe,allImages:!1,expand:["availability","variations"],select:"(data.(id,inventory,master))"}},{enabled:(null===(N=fe)||void 0===N?void 0:N.length)>0,keepPreviousData:!0});Ee&&he&&re.bundledProducts.forEach((({product:e},t)=>{const r=he.data.find((t=>t.master.masterId===e.id));r&&(re.bundledProducts[t].product=Y(Y({},e),{},{inventory:r.inventory}))}));const Pe=_e||Ee?(0,c.hh)(re):{};if(oe){var be;const e=null==ae||null===(be=ae.response)||void 0===be?void 0:be.status;if(404===e)throw new D.HTTPNotFound("Product Not Found.");throw new D.HTTPError(`HTTP Error ${e} occurred.`)}if(le){var Oe;const e=null==ce||null===(Oe=ce.response)||void 0===Oe?void 0:Oe.status;if(404===e)throw new D.HTTPNotFound("Category Not Found.");throw new D.HTTPError(`HTTP Error ${e} occurred.`)}const[Ie,Ae]=(0,o.useState)(de),we=re&&z((0,k.ec)(re)),Te=(0,Q.jE)();(0,o.useEffect)((()=>{de&&Ae(de)}),[de]);const Ce=(0,P.d)(),ke=function(){var e=(0,n.A)((function*(e){const t=yield e.response.json(),r=/Basket Quota Exceeded/.test(null==t?void 0:t.title)||/Basket Quota Exceeded/.test(null==t?void 0:t.statusMessage),n=/Basket Coming Soon Products/.test(null==t?void 0:t.title)||/Basket Coming Soon Products/.test(null==t?void 0:t.statusMessage);/Customer Baskets Quota Exceeded/.test(t.title)||Ce({title:L(r&&j.ZF.QUOTA_EXCEEDED_ERROR_MESSAGE||n&&j.ZF.COMING_SOON_PRODUCT_ERROR_MESSAGE||"ERR-BV-01"===(null==t?void 0:t.statusCode)&&j.ZF.MAX_QUANTITY_ERROR_MESSAGE||"Product Item Not Available"===(null==t?void 0:t.title)&&j.ZF.QUANTITY_NOT_AVAILABLE_ERROR_MESSAGE||j.gS),status:"error"})}));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=(0,n.A)((function*(e){try{const t=e.map((({product:e,variant:t,quantity:r})=>({productId:(null==t?void 0:t.productId)||e.id,price:(null==t?void 0:t.price)||e.price,quantity:r})));return yield W(t).then((r=>{(0,B.w3)("cart:add",{basket:r,products:e}),M.sendAddToCart(t)})),e}catch(e){ke(e),Te.invalidateQueries({predicate:e=>e.queryKey.includes("/baskets")})}}));return function(t){return e.apply(this,arguments)}}(),Se=(0,o.useCallback)((()=>{var e;Object.values(ge.current).forEach((({validateOrderability:e})=>{e({scrollErrorIntoView:!1})}));const t=Object.keys(se),r=null===(e=Pe.childProducts.find((({product:e})=>!t.includes(e.id))))||void 0===e?void 0:e.product;if(r){const{ref:e}=ge.current[r.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0}),[re,se]),je=function(){var e=(0,n.A)((function*(e,t){try{const e=Object.values(se),r=[{productId:re.id,price:re.price,quantity:t,bundledProductItems:e.map((e=>({productId:e.variant.productId,quantity:e.quantity})))}],n=yield W(r),o=e.map((e=>e.product.id)),a=n.productItems.find((e=>{var t,r;if(null!==(t=e.bundledProductItems)&&void 0!==t&&t.length)return(null===(r=e.bundledProductItems)||void 0===r?void 0:r.map((e=>e.productId))).every((e=>o.includes(e)))})),i=(0,c.NM)(a,e);return i.length&&(yield Z.mutateAsync({method:"PATCH",parameters:{basketId:n.basketId},body:i})),M.sendAddToCart(r),e}catch(e){ke(e)}}));return function(t,r){return e.apply(this,arguments)}}();(0,o.useEffect)((()=>{if(re&&re.type.set)M.sendViewProduct(re),re.setProducts.map((e=>{try{M.sendViewProduct(e)}catch(t){S.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:t,child:e}})}R.sendViewProduct(de,e,"detail")}));else if(re){try{M.sendViewProduct(re)}catch(e){S.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:e,product:re}})}R.sendViewProduct(de,re,"detail")}}),[re]),(0,o.useEffect)((()=>{!ne&&de&&(0,B.w3)("pdp:load",{product:re,category:de})}),[ne,null==de?void 0:de.id]);const Be=(0,H.o5)("ProductView",{});if(K&&we&&!(V.pathname+V.search).includes(we)){var Ne,Le;const e=new URLSearchParams(K.headers["x-original-query-string"]||V.search);2!==(null===(Ne=e.get("color"))||void 0===Ne?void 0:Ne.length)&&e.delete("color"),4!==(null===(Le=e.get("size"))||void 0===Le?void 0:Le.length)&&e.delete("size");const t=V.pathname.match(/-\d{6}-(\d{2})\.html$/);t&&e.set("color",t[1]);const r=e.toString();return o.createElement($.A,{to:{pathname:we,search:r}})}return o.createElement(p.az,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},o.createElement(O.A,{title:(null==re?void 0:re.pageTitle)||(null==re?void 0:re.name),description:(0,c.Yi)(re),rules:null==re?void 0:re.c_metadata},o.createElement("link",{rel:"canonical",href:(0,k.rf)(we)})),o.createElement(I.$,{product:re}),o.createElement(m.B,{spacing:16},_e||Ee?o.createElement(o.Fragment,null,o.createElement(E.sp,null,o.createElement(b.A,{product:re,category:(null==Ie?void 0:Ie.parentCategoryTree)||[],addToCart:_e?()=>{const e=Object.values(se);return De(e)}:je,showWishlistButton:!0,isProductLoading:ne,isBasketLoading:U,showInformation:!0,validateOrderability:Se,childProductOrderability:pe,setSelectedBundleQuantity:ye}),o.createElement("hr",null),Pe.childProducts.map((({product:e,quantity:t})=>o.createElement(p.az,{key:e.id,"data-testid":"child-product"},o.createElement(b.A,{ref:function(t){ge.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},category:(null==Ie?void 0:Ie.parentCategoryTree)||[],product:Y(Y({},e),{},{c_imageConfig:e.c_imageConfig||re.c_imageConfig}),isProductPartOfSet:_e,isProductPartOfBundle:Ee,childOfBundleQuantity:t,selectedBundleParentQuantity:ve,addToCart:_e?(t,r)=>De([{product:e,variant:t,quantity:r}]):null,showWishlistButton:!0,onVariantSelected:(e,r,n)=>{if(n)ue((o=>Y(Y({},o),{},{[e.id]:{product:e,variant:r,quantity:Ee?t:n}})));else{const t=Y({},se);delete t[e.id],ue(t)}},isProductLoading:ne,isBasketLoading:U,setChildProductOrderability:me}),o.createElement(p.az,{display:["none","none","none","block"]},o.createElement("hr",null))))))):o.createElement(o.Fragment,null,o.createElement(E.sp,null,o.createElement(b.A,{product:re,category:(null==Ie?void 0:Ie.parentCategoryTree)||[],addToCart:(e,t)=>De([{product:re,variant:e,quantity:t}]),showWishlistButton:!0,isProductLoading:ne,isBasketLoading:U,showInformation:!0}))),o.createElement(C,(0,a.A)({product:re},Be.productRecommenders))),o.createElement(F,{product:re}),ie&&o.createElement(G.A,{region:ie,marginTop:8}))};Z.getTemplateName=()=>"product-detail",Z.propTypes={match:l().object,page:l().object,setPageId:l().func};const K=(0,U.N)(Z);var X=r(10789),J=r(7200),ee=r(19439),te=r(80541);const re=e=>{const{currency:t}=(0,J.H2)(),{sendGA4GenericEvent:r,sendGA4ECommerceEvent:a,transformDataToAnalyticItems:i,sendGA4CustomEvent:d}=(0,X.vb)(),{isOpen:l}=(0,te.SM)(),c=(e,t)=>{d({event:X.B1.GA4EC_CUSTOM,event_name:e,event_params:t})};return(0,B.VI)("pdp:load",function(){var e=(0,n.A)((function*({detail:e}){const{product:n}=e,o=(0,ee.Oi)(X.AA.ITEM_LIST);yield r({product:n});const{imageType:d,imageNumber:l}=(0,X.dp)(n),c={event:X.B1.GA4EC_ITEM_VIEW,event_name:"view_item",ecommerce:{item_list_id:null==o?void 0:o.id,item_list_name:null==o?void 0:o.name,currency:t,value:(null==n?void 0:n.c_salePrice)||(null==n?void 0:n.c_listPrice),item_id_ep:null==n?void 0:n.id,item_name_ep:null==n?void 0:n.name,image_type:d,image_number:l,items:[n].map((e=>i({product:e,item_list_id:null==o?void 0:o.id,item_list_name:null==o?void 0:o.name})))}};a(c)}));return function(t){return e.apply(this,arguments)}}()),(0,B.VI)("pdp:attribute-select:color",(({detail:e})=>{var t;c("change_color",{item_id_ep:e.product.c_styleNumber,item_name_ep:e.product.name,color_code_ep:`a${e.value}`,style_number_ep:null===(t=e.product.master)||void 0===t?void 0:t.masterId})})),(0,B.VI)("pdp:attribute-select:size",(({detail:e})=>{c("choose_size",{item_id_ep:e.product.c_styleNumber,item_name_ep:e.product.name})})),(0,B.VI)("pdp:image-gallery:open",(({detail:e})=>{c("image_opened",{item_id_ep:e.product.c_styleNumber,item_name_ep:e.product.name})})),(0,B.VI)("pdp:add-to-cart:button-click",(()=>{var e;null===(e=window.dataLayer)||void 0===e||e.push({event:X.B1.GA4EC_CUSTOM,event_name:"minicart",event_params:{user_action:"view cart/checkout"}})})),(0,B.VI)("recommender:click",(()=>{l&&c("minicart",{user_action:"recommended product"})}),[l]),(0,B.VI)("pdp:description:read-more-click",(({detail:e})=>{var t,r;c("more_information",{item_id_ep:e.product.c_styleNumber,item_name_ep:e.product.name,color_code_ep:`a${null===(t=e.product.variationValues)||void 0===t?void 0:t.color}`,style_number_ep:null===(r=e.product.master)||void 0===r?void 0:r.masterId})})),o.createElement(o.Fragment,null,o.createElement(K,e))};re.getTemplateName=()=>"product-detail",re.propTypes=K.propTypes;const ne=re}}]);