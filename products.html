<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1164122425585564'); 
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1146782436884523&ev=PageView&noscript=1"/>
  </noscript>
  <!-- /Meta Pixel -->

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C3BLKS3Y14"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C3BLKS3Y14');
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="product.css">
</head>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // üî• Configura√ß√£o Firebase do teu projeto
  const firebaseConfig = {
    apiKey: "AIzaSyBGnrAogd-_luFOujGXP3_YzkTouvp0CRc",
    authDomain: "glowsteps.firebaseapp.com",
    projectId: "glowsteps",
    storageBucket: "glowsteps.firebasestorage.app",
    messagingSenderId: "476535843187",
    appId: "1:476535843187:web:a4828eed6b35e20afefd06",
    measurementId: "G-ZRNXP93D53"
  };

  // Inicializar Firebase e Firestore
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Bot√£o "Encomendar"
  const orderBtn = document.querySelector(".info button");

  orderBtn.addEventListener("click", async () => {
    const nome = document.querySelector('.info input[placeholder="Seu nome?"]').value;
    const contacto = document.querySelector('.info input[placeholder="Seu Contacto"]').value;
    const endereco = document.querySelector('.info input[placeholder="Seu Indere√ßo..."]').value;
    const tamanho = document.querySelector('.info input[placeholder^="Numero do cal√ßado"]').value;

    // Captura os produtos adicionados
    const produtos = Array.from(document.querySelectorAll(".readyproduct")).map(p => ({
      nome: p.querySelector(".infoname")?.textContent || "",
      preco: p.querySelector(".priceinfo")?.textContent || "",
      id: p.querySelector(".idproduct")?.textContent || ""
    }));

    if (!nome || !contacto || !endereco || !tamanho) {
      alert("‚ö†Ô∏è Preencha todos os campos antes de enviar!");
      return;
    }

    try {
      await addDoc(collection(db, "encomendas"), {
        nome,
        contacto,
        endereco,
        tamanho,
        produtos,
        data: new Date().toISOString()
      });

      alert("‚úÖ Encomenda enviada com sucesso!");
      document.querySelector(".subimtproduct").style.display = "none";
    } catch (error) {
      console.error("Erro ao salvar encomenda:", error);
      alert("‚ùå Ocorreu um erro ao enviar. Tente novamente.");
    }
  });
</script>

<body>
    <header class="header">
    <nav class="header-menu">
        <div class="burger-icon">
               <i class="bi bi-list"></i>
        </div>

        <div class="search-box">
           <i class="bi bi-search"></i>
            <input type="text" class="search-input" placeholder="Pesquisar..." onkeyup="search()">
        </div>
        <div class="menu-icons">
             <a href="contact.html"><i class="bi bi-person-badge-fill"></i></a>
         </div>

                <div class="cart-icon">
                    <i class="bi bi-basket3-fill  openCart"></i>
                    <span class="cart-count">0</span>
                </div>
    </nav>
</header>
 <div class="subimtproduct">
    <div class="closeinfo "><i class="bi bi-x-lg closeinfo1 "></i></div>
    <div class="productssubmited">
        <!-- <div class="readyproduct">
              <img src="shoes2/Adidas/Handball_Spezial_Shoes_Black_DB3021_00_plp_standard.avif" alt="">
        <h2 class="infoname">Adidas</h2>
        <h2 class="priceinfo">250</h2>
        </div>
        <div class="readyproduct">
              <img src="shoes2/Adidas/Handball_Spezial_Shoes_Black_DB3021_00_plp_standard.avif" alt="">
        <h2>Adidas</h2>
        </div>
           <div class="readyproduct">
              <img src="shoes2/Adidas/Handball_Spezial_Shoes_Black_DB3021_00_plp_standard.avif" alt="">
        <h2>Adidas</h2>
        </div> -->
        
    </div>

    <div class="info">
        <input type="text" placeholder="Seu nome?">
        <input type="number" placeholder="Seu Contacto">
        <input type="text" placeholder="Seu Indere√ßo...">
        <input type="text" placeholder="Numero do cal√ßado,EX:43,45,41">
        <button>Encomendar</button>

    </div>
 </div>


<main class="contents">
    <h1><span style="color: rgb(255, 102, 0); font-family:Arial, Helvetica, sans-serif;">Glow</span><span>steps</span></h1>
    <div class="product-list">
        
    </div>
</main>

<div class="cartcontent">
    <h2>seu carinho</h2> <div class="closee"><button class="close">X</button></div>
    <div class="conteudo">
    
     </div>
    <div class="finalizador">
        <p class="preco-total">preco total:</p>
        <button class="finalizarcompra">Finalizar compra</button>
    </div>
</div>


<div class="menu">
    <div class="fechar"><h1 class="fecharMenu">X</h1></div>
    <ul>
        <li class="Nike">Nike</li>
        <li class="Adidas">Adidas</li>
        <li class="Puma">Puma</li>
    </ul>

</div>

</body>
<script src="./product.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const botao = document.querySelector(".finalizarcompra");
    if (botao) {
      botao.addEventListener('click', function() {
        fbq('track', 'Purchase', {
          value: 2200,   // coloque o valor real do produto
          currency: 'MZN' // moeda
        });
        console.log("Evento Purchase enviado ao Meta Pixel!");
      });
    }
  });
</script>

</html>